# باگ‌های فرضی سایت دیجی‌کالا

## باگ ۱ — پرداخت ناموفق اما سفارش تکمیل‌شده 💳❌
 
**محصول/صفحه:** صفحه پرداخت — Checkout / Payment Gateway  
**شدت:** Critical 🔥  
**نوع باگ:** Functional  
**محیط:** وب (Chrome 120 / Windows 10) — وضعیت تست روی محیط Production  
**نقش کاربر:** کاربر عادی لاگین‌شده

### مراحل بازتولید
1. وارد حساب کاربری شده و ۱ کالا به سبد اضافه کنید.
2. به صفحه پرداخت (Checkout) بروید.
3. اطلاعات کارت بانکی معتبر وارد کنید.
4. روی دکمه «پرداخت» کلیک کنید.
5. بعد از نمایش پیغام «پرداخت ناموفق»، کاربر به صفحه‌ی «جزئیات سفارش» هدایت می‌شود و سفارش با وضعیت «تکمیل» (Completed) ذخیره می‌شود.

### نتیجه مورد انتظار
اگر در تراکنش خطا رخ دهد، سفارش نباید با وضعیت تکمیل ذخیره شود. کاربر باید پیغام خطای واضح (مثلاً «پرداخت انجام نشد، لطفاً مجدد تلاش کنید») ببیند و سفارش در حالت نامشخص یا لغو قرار گیرد.

### نتیجه واقعی
سیستم پیغام «پرداخت ناموفق» نمایش می‌دهد اما بعد از آن سفارش با وضعیت «تکمیل» ثبت می‌شود؛ سفارشات بعداً به تیم لجستیک ارسال و هزینه از کاربر دریافت نشدنی یا مغایرت حساب رخ می‌دهد.

### علت احتمالی
احتمالا علت این مشکل این است که `callback` درگاه پرداخت به درستی هندل نشده است.

---

## باگ ۲ — فیلتر قیمت در صفحه دسته‌بندی اشتباه عمل می‌کند 💸🔧 
**محصول/صفحه:** صفحه دسته‌بندی (Category Listing) — فیلتر قیمت (Price Range Slider)  
**شدت:** Major ⚠️  
**نوع باگ:** UI/UX  
**محیط:**  دسکتاپ (Firefox 119) — Production  
**نقش کاربر:** بازدیدکننده (و حتی کاربر لاگین شده)

### مراحل بازتولید
1. وارد صفحه یک دسته‌بندی (مثلاً لوازم خانگی) شوید.
2. از فیلتر قیمت، بازه 500,000 — 1,000,000 تومان را انتخاب کنید.
3. روی «اعمال فیلتر» کلیک کنید یا خودکار اعمال شود.
4. نتایج نشان داده‌شده را بررسی کنید.

### نتیجه مورد انتظار
فقط کالاهایی که قیمتشان بین 500,000 تا 1,000,000 تومان است نمایش داده شوند.

### نتیجه واقعی
نتایج شامل کالاهایی بالاتر از 1,000,000 تومان یا پایین‌تر از 500,000 تومان نیز هست؛ به‌ویژه کالاهایی با قیمت 0 (یا قیمت نمایش داده‌شده متفاوت از قیمت واقعی) در خروجی ظاهر می‌شوند.

### علت احتمالی
احتمالا علت این مشکل این است که یا `frontend` پی لود اشتباه ارسال میکند یا `backend` فیلتر را به درستی هندل نکرده است .

### شواهد/لاگ‌ها
- نمونهٔ URL فیلتر شده (پارامترهای query string).  - خروجی API لیست (payload) و فیلترهای ارسال‌شده به backend.  
- اسکرین‌شات قبل و بعد از اعمال فیلتر.
---


## باگ ۳ — نمایش کالاهای مشابه اشتباه در صفحه جزییات محصول 📱🔄

**محصول/صفحه:** صفحه جزییات محصول — بخش کالاهای مشابه
**شدت:** Major ⚠️

**نوع باگ:** Functional

**محیط:** موبایل وب (Chrome Android 14) — Staging

**نقش کاربر:** بازدیدکننده یا کاربر لاگین‌شده

### مراحل بازتولید

1. وارد صفحه جزییات یکی از محصولات شوید (مثلاً یک **آیفون تصویری**).
2. به بخش **کالاهای مشابه** در پایین صفحه بروید.
3. بررسی کنید که آیا کالاهای مشابه به درستی نمایش داده می‌شود.

### نتیجه مورد انتظار

باید کالاهای مشابه به درستی نمایش داده شوند. به عنوان مثال، اگر من در صفحه جزییات **آیفون تصویری** هستم، باید کالاهای مشابه مرتبط با **آیفون تصویری** نمایش داده شوند.

### نتیجه واقعی

در صورتی که من در صفحه جزییات **آیفون تصویری** هستم، کالاهایی مانند **گوشی آیفون** که هیچ ارتباطی به آیفون تصویری ندارند، به عنوان کالاهای مشابه نمایش داده می‌شوند.

### علت احتمالی

احتمالاً علت این مشکل این است که `backend` برای پیدا کردن کالاهای مشابه به‌جای استفاده از **Category** محصول، از **Title** و **اسم محصول** استفاده می‌کند. این باعث می‌شود که محصولاتی که نام مشابه دارند، به اشتباه به‌عنوان کالاهای مشابه نمایش داده شوند.

### شواهد/لاگ‌ها

* اسکرین‌شات از بخش کالاهای مشابه.

